<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.0.0">Jekyll</generator><link href="https://puppetlabs.github.io/iac/feed.xml" rel="self" type="application/atom+xml" /><link href="https://puppetlabs.github.io/iac/" rel="alternate" type="text/html" /><updated>2020-04-01T02:09:41+00:00</updated><id>https://puppetlabs.github.io/iac/feed.xml</id><title type="html">Puppet IAC Team</title><subtitle>Team blog and list of maintained tools by and for the Puppet Infrastructure Automation Content Team.</subtitle><entry><title type="html">27th March 2020: IAC Team Status Update</title><link href="https://puppetlabs.github.io/iac/team/status/2020/03/27/status-update.html" rel="alternate" type="text/html" title="27th March 2020: IAC Team Status Update" /><published>2020-03-27T00:00:00+00:00</published><updated>2020-03-27T00:00:00+00:00</updated><id>https://puppetlabs.github.io/iac/team/status/2020/03/27/status-update</id><content type="html" xml:base="https://puppetlabs.github.io/iac/team/status/2020/03/27/status-update.html">&lt;p&gt;The IAC team has been working on a lot of interesting things over the past week.
Here’s a brief overview of what we’ve been up to:&lt;/p&gt;

&lt;h2 id=&quot;covid-19&quot;&gt;COVID-19&lt;/h2&gt;

&lt;p&gt;Altough this situation affects all of us, we do our best to continue the good work. We chose to stay home in order to protect the community and stop the spread of the virus. We all miss the office and the chats about the weather next to the coffee machine, but here we have some friends, who are happy that we work remote:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/iac/assets/2020-03-27-status-update/collage.jpg&quot; alt=&quot;Happy Friends&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Read &lt;a href=&quot;https://puppet.com/blog/covid-19-a-note-for-our-community/&quot;&gt;Puppet’s blog: COVID-19&lt;/a&gt; for the official statement.&lt;/p&gt;

&lt;h2 id=&quot;updates-to-puppet-modules&quot;&gt;Updates to Puppet Modules&lt;/h2&gt;

&lt;p&gt;Over the last week we have released:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://forge.puppet.com/puppetlabs/translate&quot;&gt;puppetlabs/translate&lt;/a&gt; (v2.2.0)&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://forge.puppet.com/puppetlabs/firewall&quot;&gt;puppetlabs/firewall&lt;/a&gt; (v2.3.0)&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;community&quot;&gt;Community&lt;/h2&gt;

&lt;p&gt;Puppet Community was always a part of our team and we always appreciate the contributions you bring.
Thank you, folks! Here are a few highlights of this week:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-postgresql/pull/1156&quot;&gt;puppetlabs-postgresql#1156&lt;/a&gt; by &lt;a href=&quot;https://github.com/veninga&quot;&gt;veninga&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-firewall/pull/908&quot;&gt;puppetlabs-firewall#908&lt;/a&gt; by &lt;a href=&quot;https://github.com/jbro&quot;&gt;jbro&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-postgresql/pull/1158&quot;&gt;puppetlabs-postgresql#1158&lt;/a&gt; by &lt;a href=&quot;https://github.com/XnS&quot;&gt;XnS&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;We look forward to see your new contributions to Puppet modules.&lt;/p&gt;

&lt;h2 id=&quot;customer-escalations&quot;&gt;Customer Escalations&lt;/h2&gt;

&lt;p&gt;By popular request, the team started work on the &lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-panos&quot;&gt;Palo Alto Networks module&lt;/a&gt; to add support for virtual systems (check out &lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-panos/pull/119&quot;&gt;the PR&lt;/a&gt; for more details).&lt;/p&gt;

&lt;h2 id=&quot;dsc-rework&quot;&gt;DSC Rework&lt;/h2&gt;

&lt;p&gt;We’ve started work on re-architecting and revitalizing our DSC builder (check out &lt;a href=&quot;https://tickets.puppetlabs.com/browse/IAC-41&quot;&gt;IAC-41&lt;/a&gt; for some details!) based on prototype work by &lt;a href=&quot;https://github.com/jpogran&quot;&gt;James Pogran&lt;/a&gt;. In short, this project is aiming to provide a PowerShell module for Puppetizing DSC resources, complete with intellisense, help, and guardrails.
A bit further out and we’ll have a new namespace on the forge - dsc - where we’ll publish these automatically generated modules as 1:1 matches for the PowerShell modules with DSC resources on the &lt;a href=&quot;https://www.powershellgallery.com/packages&quot;&gt;PowerShellGallery&lt;/a&gt;!
We’re working hard right now to pull the prototype across the last couple of miles to get an MVP for testing - if you’re interested in beta testing this project with us, please reach out on &lt;a href=&quot;https://slack.puppet.com/&quot;&gt;slack in #windows&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;litmus-progress&quot;&gt;Litmus Progress&lt;/h2&gt;

&lt;p&gt;On &lt;a href=&quot;https://github.com/puppetlabs/puppet_litmus&quot;&gt;Litmus&lt;/a&gt;, the team had a productive week.
We managed to fix some bugs that you can check out &lt;a href=&quot;https://github.com/puppetlabs/puppet_litmus/pull/271&quot;&gt;here&lt;/a&gt; and &lt;a href=&quot;https://github.com/puppetlabs/puppet_litmus/pull/272&quot;&gt;here&lt;/a&gt;.
Also, now we are able to capture more information for &lt;a href=&quot;https://github.com/puppetlabs/puppet_litmus/pull/264&quot;&gt;honeycomb&lt;/a&gt;.
Part of that is due to the new &lt;a href=&quot;https://github.com/puppetlabs/rspec_honeycomb_formatter&quot;&gt;rspec_honeycomb_formatter&lt;/a&gt; that let’s you post all your examples and results to honeycomb.&lt;/p&gt;

&lt;p&gt;The last few of modules where the acceptance tests need converting to Litmus are now in progress:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://forge.puppet.com/puppetlabs/websphere_application_server&quot;&gt;puppetlabs/websphere_application_server&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://forge.puppet.com/puppetlabs/satellite_pe_tools&quot;&gt;puppetlabs/satellite_pe_tools&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://forge.puppet.com/puppetlabs/reboot&quot;&gt;puppetlabs-reboot&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://forge.puppet.com/puppetlabs/ibm_installation_manager&quot;&gt;puppetlabs-ibm_installation_manager&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If you’re interested in converting a module to Litmus, feel free to get in touch with us during &lt;a href=&quot;https://puppet.com/community/office-hours/&quot;&gt;Office Hours&lt;/a&gt; or use the &lt;a href=&quot;https://github.com/puppetlabs/puppet_litmus/wiki/Converting-a-module-to-use-Litmus&quot;&gt;documentation&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Final litmus note: we did the work already a few weeks ago, but now closed &lt;a href=&quot;https://tickets.puppetlabs.com/browse/IAC-560&quot;&gt;the ticket&lt;/a&gt;: we’re now using the &lt;a href=&quot;https://github.com/puppetlabs/litmusimage&quot;&gt;litmusimage&lt;/a&gt; docker images in all our testing.
They are regularly autogenerated and accept community contributions.&lt;/p&gt;

&lt;h2 id=&quot;live-from-the-action&quot;&gt;Live from the Action&lt;/h2&gt;

&lt;p&gt;If you want to learn new things or just improve your skills, our team member &lt;a href=&quot;https://github.com/DavidS&quot;&gt;David Schmitt&lt;/a&gt; has a &lt;a href=&quot;https://www.twitch.tv/dev_el_ops&quot;&gt;lot of cookies&lt;/a&gt;.
You can read about &lt;a href=&quot;https://club.black.co.at/log/posts/2020-03-22-my-new-life-as-streamer/index.html&quot;&gt;his technical setup&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;welcome-to-the-team&quot;&gt;Welcome to the team!&lt;/h2&gt;

&lt;p&gt;We started the week with a new team member. His name is Adrian Iurca and he also loves pets. We are so excited about having you on our team! Good luck and welcome aboard !&lt;/p&gt;

&lt;h2 id=&quot;happy-5-years-work-anniversary-david-schmitt&quot;&gt;Happy 5 years work anniversary, David Schmitt!&lt;/h2&gt;

&lt;p&gt;He has been an essential part of our team’s journey and success. We are grateful for the dedication and passion you have shown. Thank you for being with us. Happy Work Anniversary!&lt;/p&gt;

&lt;h2 id=&quot;other-things&quot;&gt;Other things&lt;/h2&gt;

&lt;p&gt;Today we’ll have our first virtual team lunch.&lt;/p&gt;</content><author><name>daianamezdrea</name></author><category term="module updates" /><category term="community" /><category term="litmus" /><category term="facter" /><category term="testing" /><category term="pdk" /><summary type="html">The IAC team has been working on a lot of interesting things over the past week. Here’s a brief overview of what we’ve been up to:</summary></entry><entry><title type="html">20th March 2020: IAC Team Status Update</title><link href="https://puppetlabs.github.io/iac/team/status/2020/03/20/status-update.html" rel="alternate" type="text/html" title="20th March 2020: IAC Team Status Update" /><published>2020-03-20T00:00:00+00:00</published><updated>2020-03-20T00:00:00+00:00</updated><id>https://puppetlabs.github.io/iac/team/status/2020/03/20/status-update</id><content type="html" xml:base="https://puppetlabs.github.io/iac/team/status/2020/03/20/status-update.html">&lt;p&gt;The IAC team has been working on a lot of interesting things over the past week.
Here’s a brief overview of what we’ve been up to:&lt;/p&gt;

&lt;h2 id=&quot;covid-19&quot;&gt;COVID-19&lt;/h2&gt;
&lt;p&gt;Read &lt;a href=&quot;https://puppet.com/blog/covid-19-a-note-for-our-community/&quot;&gt;Puppet’s blog: COVID-19&lt;/a&gt; for the official statement.
Puppet provided remote working for all employees to support COVID-19.
This precautionary measure has been taken in order to keep everyone healthy and limit the spread of the virus.&lt;/p&gt;

&lt;p&gt;The company supports employees by giving them all the essentials to work remotely and it also appreciates the fact that remote working requires everyone to adjust their working styles.
It may not be smooth for everyone, but the company is doing its best to support all the employees during this challenging time.&lt;/p&gt;

&lt;p&gt;So far, everyone is well equipped to work remotely to their best.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/iac/assets/2020-03-20-status-update/remote_working.jpg&quot; alt=&quot;Remote Working&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;updates-to-puppet-modules&quot;&gt;Updates to Puppet Modules&lt;/h2&gt;

&lt;p&gt;Over the last week we have released:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://forge.puppet.com/puppetlabs/postgresql&quot;&gt;puppetlabs/postgresql&lt;/a&gt; (v6.4.0)&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://forge.puppet.com/puppetlabs/rook&quot;&gt;puppetlabs/rook&lt;/a&gt; (v0.4.0)&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;facter-4-testing&quot;&gt;Facter 4 Testing&lt;/h2&gt;

&lt;p&gt;The Ghost team tested our modules with Facter 4 using pdksync.
Except for the Apache module, all modules passed Facter 4 testing.
(apache failed because of a custom fact in https://github.com/gentoo/puppet-portage.git).
Thanks alot to &lt;a href=&quot;https://github.com/florindragos&quot;&gt;Florin Dragos&lt;/a&gt;, &lt;a href=&quot;https://github.com/IrimieBogdan&quot;&gt;Bogdan Irimie&lt;/a&gt;, &lt;a href=&quot;https://github.com/oanatmaria&quot;&gt;Oana Tanasoiu&lt;/a&gt;, &lt;a href=&quot;https://github.com/sebastian-miclea&quot;&gt;Sebastian Miclea&lt;/a&gt;, &lt;a href=&quot;https://github.com/gimmyxd&quot;&gt;Gheorghe Popescu&lt;/a&gt;, &lt;a href=&quot;https://github.com/Filipovici-Andrei&quot;&gt;Andrei Filipovici&lt;/a&gt; for all the help on module testing and the fixes.&lt;/p&gt;

&lt;h2 id=&quot;community&quot;&gt;Community&lt;/h2&gt;

&lt;p&gt;As always we have been working with the brilliant Puppet Community to get their changes in to the modules.
A few highlights this week:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-postgresql/pull/1150&quot;&gt;puppetlabs-postgresql#1150&lt;/a&gt;: A pleasure working with &lt;a href=&quot;https://github.com/olifre&quot;&gt;olifre&lt;/a&gt; to get this fix he authored over the line.
Kudos on the first RSpec test!&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-docker/pull/586&quot;&gt;puppetlabs-docker#586&lt;/a&gt;: Many thanks to &lt;a href=&quot;https://github.com/fe80&quot;&gt;fe80&lt;/a&gt; for this fix!&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-inifile/pull/387&quot;&gt;puppetlabs-inifile#387&lt;/a&gt;: &lt;a href=&quot;https://github.com/alexjfisher&quot;&gt;alexjfisher&lt;/a&gt; continues his never ending streak of great contributions!&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-chocolatey/pull/206&quot;&gt;puppetlabs-chocolatey#206&lt;/a&gt; is a WIP PR put up by &lt;a href=&quot;https://github.com/nmaludy&quot;&gt;nmaludy&lt;/a&gt; doing the hard and valuable work of adding Bolt tasks to the Chocolatey module!&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;development-infrastructure&quot;&gt;Development Infrastructure&lt;/h2&gt;

&lt;p&gt;There’s been plenty keeping us busy in our CI infrastructure this week:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;the Puppet repositories removed unencrypted HTTP access before all tooling upgrades were in place, breaking puppet 5 agent installs in our pipelines.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;It was a good lesson how with so many products spanning so many repositories, even with the best foresight from all parties, there can be unforeseen knock on effects from a code change.
When we discovered the root cause of the issues preventing the Puppet 5 agent installing on some older Linux systems, the Agent team were quick off the mark to address our issues.
We’d like to thank the Agent team for their responsiveness in addressing issues that were causing CI test run failures.
Thanks &lt;a href=&quot;https://github.com/ciprianbadescu&quot;&gt;ciprianbadescu&lt;/a&gt;, &lt;a href=&quot;https://github.com/lucywyman&quot;&gt;lucywyman&lt;/a&gt;, beechtom](https://github.com/beechtom), &lt;a href=&quot;https://github.com/underscorgan&quot;&gt;underscorgan&lt;/a&gt;, &lt;a href=&quot;https://github.com/e-gris&quot;&gt;e-gris&lt;/a&gt;, &lt;a href=&quot;https://github.com/GabrielNagy&quot;&gt;GabrielNagy&lt;/a&gt; and &lt;a href=&quot;https://github.com/sarameisburger&quot;&gt;sarameisburger&lt;/a&gt;!
This has been an interesting issue.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;the NTP module started failing in travis: &lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-ntp/pull/566&quot;&gt;puppetlabs-ntp#566&lt;/a&gt;.
&lt;a href=&quot;https://github.com/DavidS&quot;&gt;DavidS&lt;/a&gt; and &lt;a href=&quot;https://github.com/carabasdaniel&quot;&gt;carabasdaniel&lt;/a&gt; worked on &lt;a href=&quot;https://tickets.puppetlabs.com/browse/IAC-615&quot;&gt;IAC-615&lt;/a&gt; and tried to analyse it,
but the only thing that helped was bumping the build runner to bionic.
Curiosity will likely get the better of us and we’ll want to know why these failures occurred on xenial.
Check out &lt;a href=&quot;https://tickets.puppetlabs.com/browse/IAC-615&quot;&gt;the ticket&lt;/a&gt; if you’re interested or have any ideas.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;customer-escalations&quot;&gt;Customer Escalations&lt;/h2&gt;

&lt;p&gt;Over the past week we have closed out an issue on the &lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-stdlib&quot;&gt;puppetlabs-stdlib&lt;/a&gt; module.
As a result of &lt;a href=&quot;https://tickets.puppetlabs.com/browse/IAC-547&quot;&gt;this ticket&lt;/a&gt; we have decided to remove strftime from stdlib as it has already been deprecated and superseded by a function within the Puppet agent.&lt;/p&gt;

&lt;h2 id=&quot;powershell-podcast&quot;&gt;PowerShell podcast&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/glennsarti&quot;&gt;Glenn Sarti&lt;/a&gt; and &lt;a href=&quot;https://github.com/michaeltlombardi&quot;&gt;Michael T Lombardi&lt;/a&gt; appeared on the &lt;a href=&quot;https://www.youtube.com/watch?v=Xirv6WQFmSs&amp;amp;feature=emb_logo&quot;&gt;PowerScripting Podcast&lt;/a&gt; to talk about puppet and PowerShell.
Check it out!&lt;/p&gt;

&lt;h2 id=&quot;community-reports-tool&quot;&gt;Community Reports Tool&lt;/h2&gt;

&lt;p&gt;Community reports tool is enhanced with an additional feature to report the PRs from tools maintained by the IAC team.
See the &lt;a href=&quot;https://puppetlabs.github.io/community_management/&quot;&gt;Tools Report&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;litmus-progress&quot;&gt;Litmus Progress&lt;/h2&gt;

&lt;p&gt;On &lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-docker&quot;&gt;puppetlabs-docker&lt;/a&gt; we have finished the conversion to allow users to run acceptance tests using Litmus in &lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-docker/pull/585&quot;&gt;puppetlabs-docker#585&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;process-improvement&quot;&gt;Process Improvement&lt;/h2&gt;

&lt;p&gt;We are continously improving the Triage process - one change made recently has proven to be very beneficial. At the end of our rotation, we will hand off to our colleagues who are next up on Triage.
Historically, this was done using a JIRA ticket, but now we have a living document on &lt;a href=&quot;https://www.atlassian.com/software/confluence&quot;&gt;Confluence&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;We’re also keeping more tightly in sync over video calls - historically, if you were parterned with someone in a different timezone, this was normal - now it’s the case for all of us, whether you’re 5 or 5000 miles apart.&lt;/p&gt;</content><author><name>sheenaajay</name></author><category term="module updates" /><category term="community" /><category term="litmus" /><category term="facter" /><category term="testing" /><category term="pdk" /><summary type="html">The IAC team has been working on a lot of interesting things over the past week. Here’s a brief overview of what we’ve been up to:</summary></entry><entry><title type="html">How to use agent-side information on the puppetserver</title><link href="https://puppetlabs.github.io/iac/module/development/2020/03/18/how-to-use-agent-information-on-puppetserver.html" rel="alternate" type="text/html" title="How to use agent-side information on the puppetserver" /><published>2020-03-18T00:00:00+00:00</published><updated>2020-03-18T00:00:00+00:00</updated><id>https://puppetlabs.github.io/iac/module/development/2020/03/18/how-to-use-agent-information-on-puppetserver</id><content type="html" xml:base="https://puppetlabs.github.io/iac/module/development/2020/03/18/how-to-use-agent-information-on-puppetserver.html">&lt;p&gt;This question was posted on the &lt;a href=&quot;https://slack.puppet.com/&quot;&gt;Puppet Community Slack&lt;/a&gt; yesterday:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Is there any way like the below in puppet code we can use:&lt;/p&gt;
  &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$var=‘run command locally on agent, if $?=0 echo “present”, else echo “absent”’
if $var == present {
  # my code
} else {
  # something else
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
  &lt;p&gt;(by user &lt;a href=&quot;https://app.slack.com/team/URGFPBS0N&quot;&gt;IlovPuppet&lt;/a&gt;, edited for presentation)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;There are a number of reasons why this question comes up.
First is likely that folks are not aware of the options available at all.
Then, sometimes, the common options (like custom facts) just don’t cut it for security or performance reasons.
Last but not least, organisational and technical circumstances can make one option more appealing than others.&lt;/p&gt;

&lt;p&gt;From my answer there, I wrote up a more detailed exposition here.
Based on the specifics of your situation,
there are several different options to solve this,
described in detail below:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;make the decision explicit&lt;/li&gt;
  &lt;li&gt;a &lt;code class=&quot;highlighter-rouge&quot;&gt;Deferred&lt;/code&gt; function call&lt;/li&gt;
  &lt;li&gt;using &lt;code class=&quot;highlighter-rouge&quot;&gt;onlyif&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;unless&lt;/code&gt; on an &lt;code class=&quot;highlighter-rouge&quot;&gt;exec&lt;/code&gt; resource&lt;/li&gt;
  &lt;li&gt;a custom fact&lt;/li&gt;
  &lt;li&gt;a custom resource&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;explicit-decisions&quot;&gt;Explicit Decisions&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;What is it?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Puppet shines when we can make our configuration decisions explicit.
Make the dynamic decision a static configuration and ensure that whatever is producing the different states is also managed by puppet.
Having a hard look at what the command is trying to decide and whether this couldn’t be enforced instead of queried can save complexity.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Example&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;A simple example from my past as a technical consultant is a client who wanted to base a configuration decision off whether or not a particular package was installed on a workstation. In this particular case it turned out that installing that additional package was not very expensive (compared to coding up a dynamic solution), so we just rolled out the package to everyone and removed another thing that was different across the fleet.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Use it …&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;if you can take control of the source of your question.&lt;/li&gt;
  &lt;li&gt;if you can key off another configuration instead of querying active system state.&lt;/li&gt;
  &lt;li&gt;if you can make your general configuration easier by removing a source of variation.&lt;/li&gt;
  &lt;li&gt;if the query code is difficult and/or unreliable.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Don’t use it if …&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;the input is truly dynamic.&lt;/li&gt;
  &lt;li&gt;the configuration is outside of your organisational scope (but try talking to the other team first!).&lt;/li&gt;
  &lt;li&gt;the computed value is sensitive and should not be transmitted or stored outside the node.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;deferred&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Deferred&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;What is it?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;Deferred&lt;/code&gt; function computes a value on the agent everytime the catalog is executed and uses the value immediately in the catalog.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Example&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;The &lt;a href=&quot;https://forge.puppet.com/puppet/vault_lookup&quot;&gt;puppet/vault_lookup&lt;/a&gt; module shows how to use &lt;code class=&quot;highlighter-rouge&quot;&gt;Deferred&lt;/code&gt; with its &lt;code class=&quot;highlighter-rouge&quot;&gt;vault_lookup::lookup&lt;/code&gt; function:&lt;/p&gt;

&lt;div class=&quot;language-puppet highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Deferred&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'vault_lookup::lookup'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;secret/test&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'https://vault.hostname:8200'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;notify&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;example&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;py&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$d&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;(from &lt;a href=&quot;https://github.com/voxpupuli/puppet-vault_lookup#usage&quot;&gt;voxpupuli/puppet-vault_lookup&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Use it …&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;for values specific to one or a few agents, for which managing via Hiera would be cumbersome.&lt;/li&gt;
  &lt;li&gt;for sensitive values that should not be exposed outside the individual agent.&lt;/li&gt;
  &lt;li&gt;for setting properties on resources.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Don’t use it if …&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;you need to change &lt;strong&gt;which&lt;/strong&gt; resources are managed.&lt;/li&gt;
  &lt;li&gt;you need the value in PE Console for classification or reporting.&lt;/li&gt;
  &lt;li&gt;the computed value depends on resources managed earlier in the catalog.&lt;/li&gt;
  &lt;li&gt;a simpler solution (see above) works.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://puppet.com/docs/puppet/latest/write_a_puppet_function_to_store_secrets.html&quot;&gt;Write a Puppet function to store secrets&lt;/a&gt;: the original use-case for &lt;code class=&quot;highlighter-rouge&quot;&gt;Deferred&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://puppet-on-the-edge.blogspot.com/2018/10/the-topic-is-deferred.html&quot;&gt;The Topic is Deferred&lt;/a&gt;: blogpost with hints and tricks how to use &lt;code class=&quot;highlighter-rouge&quot;&gt;Deferred&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://binford2k.com/2019/11/12/deferred-functions/&quot;&gt;Agent Side Functions in Puppet 6&lt;/a&gt;: technical deep-dive on how &lt;code class=&quot;highlighter-rouge&quot;&gt;Deferred&lt;/code&gt; works&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.hashicorp.com/resources/agent-side-lookups-with-hashicorp-vault-puppet-6&quot;&gt;HashiCorp Vault 🧡 Puppet6 webinar&lt;/a&gt;: deferred functions in Puppet 6, which unlocks new authentication methods and workflows for HashiCorp Vault + Puppet setups.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;exec-resources&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;exec&lt;/code&gt; resources&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;What is it?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;exec&lt;/code&gt; resource has attributes to dynamically decide to run the managed command or not.
By passing a command to &lt;code class=&quot;highlighter-rouge&quot;&gt;onlyif&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;unless&lt;/code&gt; the command is executed &lt;em&gt;only if&lt;/em&gt; or &lt;em&gt;unless&lt;/em&gt; the condition successfully executes.
Use &lt;code class=&quot;highlighter-rouge&quot;&gt;refreshonly&lt;/code&gt; to react to another resource being changed.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Example&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;The &lt;a href=&quot;https://forge.puppet.com/puppetlabs/mysql&quot;&gt;mysql module&lt;/a&gt; has this &lt;code class=&quot;highlighter-rouge&quot;&gt;exec&lt;/code&gt; resource to clean up after installation. This should never run after &lt;code class=&quot;highlighter-rouge&quot;&gt;${secret_file}&lt;/code&gt; has been dealt with.&lt;/p&gt;
&lt;div class=&quot;language-puppet highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'remove install pass'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;py&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$rm_pass_cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;py&quot;&gt;onlyif&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;test -f &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;${secret_file}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;py&quot;&gt;path&lt;/span&gt;    &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin'&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;(from &lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-mysql/blob/312aca80ba7699ab37f9051d871aac2e05b217b3/manifests/server/root_password.pp#L20-L24&quot;&gt;root_password.pp&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Use it for …&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;running one-off commands on a condition.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Don’t use it if …&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;an exec is not a good fit for your problem.&lt;/li&gt;
  &lt;li&gt;the condition is very complex or timeconsuming.&lt;/li&gt;
  &lt;li&gt;the condition has to be repeated often.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://puppet.com/docs/puppet/latest/types/exec.html&quot;&gt;Resource Type: &lt;code class=&quot;highlighter-rouge&quot;&gt;exec&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;custom-facts&quot;&gt;Custom Facts&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;What is it?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Custom facts are distributed to Puppet clients and are available for use in manifests and templates,
just like any other fact is.
They can be used to write conditional expressions based on site-specific data that isn’t available via Facter.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Example&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;The apt module has a few &lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-apt#facts&quot;&gt;custom facts&lt;/a&gt;. The &lt;code class=&quot;highlighter-rouge&quot;&gt;apt_update_last_success&lt;/code&gt; fact is used in &lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-apt/blob/master/manifests/update.pp&quot;&gt;update.pp&lt;/a&gt; to decide whether or not it is necessary to update apt caches depending on the various configurations specified.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Use it …&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;when you need to centrally collect and evaluate the values.&lt;/li&gt;
  &lt;li&gt;when you want to get the value from all your nodes.&lt;/li&gt;
  &lt;li&gt;to change the set of resources and classes included for each node.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Don’t use it if …&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;the computed value is sensitive and should not be transmitted or stored outside the node.&lt;/li&gt;
  &lt;li&gt;a simpler solution (see above) works.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://puppet.com/docs/puppet/latest/fact_overview.html&quot;&gt;Custom facts&lt;/a&gt;: the current puppet documentation&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://puppet.com/docs/puppet/latest/custom_facts.html&quot;&gt;Custom facts walkthrough&lt;/a&gt;: how to write your own facts&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://glennsarti.github.io/blog/puppet-ruby-facts/&quot;&gt;Starting out with Puppet custom facts&lt;/a&gt;: a quick start to converting external facts to ruby custom facts on Windows&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;custom-resources&quot;&gt;Custom Resources&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;What is it?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;With a native ruby plugin you can fully take control of how puppet manages a resource. Through this you get fine-grained control over reporting and enforcing system state through puppet.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Example&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;The &lt;a href=&quot;https://forge.puppet.com/puppetlabs/mysql&quot;&gt;mysql module&lt;/a&gt; contains custom types and providers to control databases, users and grants.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Note that the mysql module is still using the low-level API. Using the PDK and the Resource API, programming types and providers has become a lot easier as of late. Check out the “Further Reading” section below.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;Use it for …&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;things that can be modeled as a puppet resource.&lt;/li&gt;
  &lt;li&gt;fine-grained control.&lt;/li&gt;
  &lt;li&gt;full integration into the puppet tooling.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Don’t use it if …&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;you do not want to code ruby.&lt;/li&gt;
  &lt;li&gt;a simpler solution (see above) works.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://puppet.com/docs/puppet/latest/custom_resources.html&quot;&gt;Custom Resources&lt;/a&gt;: main documentation on writing custom resources.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/puppetlabs/puppet-resource_api/tree/master/docs&quot;&gt;HUE hands on lab&lt;/a&gt;: hands-on lab for a custom remote resource interacting with a API.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;final-words&quot;&gt;Final Words&lt;/h2&gt;

&lt;p&gt;To summarize, Puppet provides you with a number of alternatives to make your configuration smarter.
Thanks to IluvPuppet for the great question, and &lt;a href=&quot;https://github.com/hpcprofessional&quot;&gt;Paul Anderson&lt;/a&gt; and Paul Reed for reviewing and feedback.&lt;/p&gt;</content><author><name>dev_el_ops</name></author><category term="modules" /><category term="puppetserver" /><category term="custom facts" /><category term="custom resources" /><category term="deferred" /><summary type="html">This question was posted on the Puppet Community Slack yesterday:</summary></entry><entry><title type="html">13th March 2020: IAC Team Status Update</title><link href="https://puppetlabs.github.io/iac/team/status/2020/03/13/status-update.html" rel="alternate" type="text/html" title="13th March 2020: IAC Team Status Update" /><published>2020-03-13T00:00:00+00:00</published><updated>2020-03-13T00:00:00+00:00</updated><id>https://puppetlabs.github.io/iac/team/status/2020/03/13/status-update</id><content type="html" xml:base="https://puppetlabs.github.io/iac/team/status/2020/03/13/status-update.html">&lt;p&gt;The IAC team has been working on a lot of interesting things over the past week.
Here’s a brief overview of what we’ve been up to:&lt;/p&gt;

&lt;h2 id=&quot;updates-to-puppet-modules&quot;&gt;Updates to Puppet Modules&lt;/h2&gt;

&lt;p&gt;Over the last week we have released:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://forge.puppet.com/puppetlabs/apt&quot;&gt;puppetlabs/apt&lt;/a&gt; (v7.4.1)&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;community&quot;&gt;Community&lt;/h2&gt;

&lt;p&gt;A big thank you goes out to &lt;a href=&quot;https://github.com/glennsarti&quot;&gt;Glenn Sarti&lt;/a&gt; for the work he has done in removing the PDK dependency from Litmus.
Also we would like to thank &lt;a href=&quot;https://github.com/anarcat&quot;&gt;Antoine&lt;/a&gt; and &lt;a href=&quot;https://tickets.puppetlabs.com/secure/ViewProfile.jspa?name=dhs%40recommind.com&amp;amp;selectedTab=com.atlassian.streams.streams-jira-plugin:user-profile-stream-panel&quot;&gt;Dirk Heinrichs&lt;/a&gt; for their help in resolving the file permission issues on the &lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-apt&quot;&gt;puppetlabs-apt&lt;/a&gt; module.&lt;/p&gt;

&lt;h2 id=&quot;customer-escalations&quot;&gt;Customer Escalations&lt;/h2&gt;

&lt;p&gt;Over the past week we have closed out two issues on the &lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-apt&quot;&gt;puppetlabs-apt&lt;/a&gt; module. As a result of these two tickets &lt;a href=&quot;https://tickets.puppetlabs.com/browse/MODULES-10548&quot;&gt;MODULES-10548&lt;/a&gt; and &lt;a href=&quot;https://tickets.puppetlabs.com/browse/MODULES-10583&quot;&gt;MODULES-10583&lt;/a&gt; we have decided to remove the file permissions management from the module implementation.&lt;/p&gt;

&lt;p&gt;We have also merged a PR that will remove the strftime function from the &lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-stdlib&quot;&gt;puppetlabs-stdlib&lt;/a&gt; module as this function has been deprecated and superseded by a function withing the Puppet agent, see &lt;a href=&quot;https://tickets.puppetlabs.com/browse/IAC-547&quot;&gt;IAC-547&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;litmus-progress&quot;&gt;Litmus Progress&lt;/h2&gt;

&lt;p&gt;We have released &lt;a href=&quot;https://github.com/puppetlabs/puppet_litmus/releases/tag/0.16.0&quot;&gt;Litmus version 0.16.0&lt;/a&gt; that contains a couple of nice fixes and removes dependency on PDK - &lt;a href=&quot;https://github.com/puppetlabs/puppet_litmus/blob/master/CHANGELOG.md&quot;&gt;CHANGELOG&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;On &lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-vsphere&quot;&gt;puppetlabs-vsphere&lt;/a&gt; we have finished the conversion to allow users to run acceptance tests using Litmus in &lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-vsphere/pull/172&quot;&gt;puppetlabs-vsphere#172&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Finally the conversion for using Litmus for &lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-docker&quot;&gt;puppetlabs-docker&lt;/a&gt; acceptance testing is ready to be merged in &lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-docker/pull/585&quot;&gt;puppetlabs-docker#585&lt;/a&gt;.
As a result any future pull request to the docker module will also run the acceptance tests using Github Actions hosted runners on Ubuntu 16.04 and Ubuntu 18.04.
For running acceptance tests on Windows, the provision file of the module contains a item that uses a Windows Vagrant box for testing.&lt;/p&gt;</content><author><name>carabasdaniel</name></author><category term="module updates" /><category term="community" /><category term="litmus" /><category term="facter" /><category term="testing" /><category term="pdk" /><summary type="html">The IAC team has been working on a lot of interesting things over the past week. Here’s a brief overview of what we’ve been up to:</summary></entry><entry><title type="html">5th March 2020: IAC Team Status Update</title><link href="https://puppetlabs.github.io/iac/team/status/2020/03/05/status-update.html" rel="alternate" type="text/html" title="5th March 2020: IAC Team Status Update" /><published>2020-03-05T00:00:00+00:00</published><updated>2020-03-05T00:00:00+00:00</updated><id>https://puppetlabs.github.io/iac/team/status/2020/03/05/status-update</id><content type="html" xml:base="https://puppetlabs.github.io/iac/team/status/2020/03/05/status-update.html">&lt;p&gt;The IAC team has been working on a lot of interesting things over the past week.
Here’s a brief overview of what we’ve been up to:&lt;/p&gt;

&lt;h2 id=&quot;updates-to-puppet-modules&quot;&gt;Updates to Puppet Modules&lt;/h2&gt;

&lt;p&gt;Over the last week we have released three different modules:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://forge.puppet.com/puppetlabs/apt&quot;&gt;puppetlabs/apt&lt;/a&gt; (v7.4.0)&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://forge.puppet.com/puppetlabs/mysql&quot;&gt;puppetlabs/mysql&lt;/a&gt; (v10.4.0)&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://forge.puppet.com/puppetlabs/reboot&quot;&gt;puppetlabs/reboot&lt;/a&gt; (v3.0.0)&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;customer-escalations&quot;&gt;Customer Escalations&lt;/h2&gt;

&lt;p&gt;Over the past week we have closed out one major piece of customer escalation for the &lt;a href=&quot;https://tickets.puppetlabs.com/browse/IAC-350&quot;&gt;mysql&lt;/a&gt; module and we have also begun work on another that has been raised regarding the &lt;a href=&quot;https://tickets.puppetlabs.com/browse/MODULES-10581&quot;&gt;reboot&lt;/a&gt; module.&lt;/p&gt;

&lt;p&gt;Work has also been started on improvements to the SqlServer module, with multiple issues raised being worked on concurrently, said issues being detailed in the following tickets: &lt;a href=&quot;https://tickets.puppetlabs.com/browse/FM-8879&quot;&gt;FM-8879&lt;/a&gt;, &lt;a href=&quot;https://tickets.puppetlabs.com/browse/MODULES-3934&quot;&gt;MODULES-3934&lt;/a&gt; and &lt;a href=&quot;https://tickets.puppetlabs.com/browse/MODULES-5071&quot;&gt;MODULES-5071&lt;/a&gt;. Big thanks go out to Bill Hurt for his acceptance in this matter, his advice, guidance and the work he has put in directly have been invaluable.&lt;/p&gt;

&lt;h2 id=&quot;litmus-progress&quot;&gt;Litmus Progress&lt;/h2&gt;

&lt;p&gt;Our work on converting our tests to Litmus has been ongoing with one module, MySQL having been fully converted and another, vSphere being in the process of recieving its final reviews.&lt;/p&gt;

&lt;p&gt;Finally in regards to the progress we made with Docker we are facing some challenges in regards to Windows support but we have made good progress and expect even more in the future, the changes can be seen &lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-docker/pull/585&quot;&gt;in this PR&lt;/a&gt;.&lt;/p&gt;</content><author><name>david22swan</name></author><category term="module updates" /><category term="community" /><category term="litmus" /><category term="facter" /><category term="testing" /><category term="pdk" /><summary type="html">The IAC team has been working on a lot of interesting things over the past week. Here’s a brief overview of what we’ve been up to:</summary></entry><entry><title type="html">28th Feb 2020: IAC Team Status Update</title><link href="https://puppetlabs.github.io/iac/team/status/2020/02/28/status-update.html" rel="alternate" type="text/html" title="28th Feb 2020: IAC Team Status Update" /><published>2020-02-28T00:00:00+00:00</published><updated>2020-02-28T00:00:00+00:00</updated><id>https://puppetlabs.github.io/iac/team/status/2020/02/28/status-update</id><content type="html" xml:base="https://puppetlabs.github.io/iac/team/status/2020/02/28/status-update.html">&lt;p&gt;The IAC team has been working on a lot of interesting things over the past week.
Here’s a brief overview of what we’ve been up to:&lt;/p&gt;

&lt;h2 id=&quot;updates-to-puppet-modules&quot;&gt;Updates to Puppet Modules&lt;/h2&gt;

&lt;p&gt;No modules were released since last week.&lt;/p&gt;

&lt;h2 id=&quot;community-contributions&quot;&gt;Community Contributions&lt;/h2&gt;

&lt;p&gt;Thanks to &lt;a href=&quot;https://github.com/jmangt&quot;&gt;@jmangt&lt;/a&gt; for their improvements to the provision module,
&lt;a href=&quot;https://github.com/puppetlabs/provision/pull/103&quot;&gt;adding support for sssh’ing to vagrant boxes where root is not allowed to ssh&lt;/a&gt; and &lt;a href=&quot;https://github.com/puppetlabs/provision/pull/101&quot;&gt;ensuring the vagrant provision task works against paths with spaces in them&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;concurrent-ruby-issues--patch&quot;&gt;Concurrent Ruby Issues &amp;amp; Patch&lt;/h2&gt;

&lt;p&gt;The &lt;a href=&quot;https://tickets.puppetlabs.com/browse/IAC-556&quot;&gt;ruby segfault problems in Travis discovered last week&lt;/a&gt; now have a &lt;a href=&quot;https://github.com/puppetlabs/puppet-module-gems/pull/124/files&quot;&gt;bandaid&lt;/a&gt;, released in &lt;a href=&quot;https://github.com/puppetlabs/puppet-module-gems/blob/master/CHANGELOG.md#044&quot;&gt;puppet-module-gems &lt;code class=&quot;highlighter-rouge&quot;&gt;0.4.4&lt;/code&gt;&lt;/a&gt; - this patch ensures that concurrent-ruby &lt;code class=&quot;highlighter-rouge&quot;&gt;1.1.6&lt;/code&gt; is not installed. This has restored CI functionality for us.&lt;/p&gt;

&lt;h2 id=&quot;weekly-test-runs&quot;&gt;Weekly Test Runs&lt;/h2&gt;

&lt;p&gt;Numerous PRs went through this week to ensure 44 modules (all those supported modules which have been converted to Litmus so far) run weekly tests via GitHub Actions.
These tests run against the master branch executing the full test suite - all of the spec tests and then all of the acceptance tests against the full matrix of operating systems for that module (defined in the &lt;code class=&quot;highlighter-rouge&quot;&gt;release_checks&lt;/code&gt; section of the &lt;code class=&quot;highlighter-rouge&quot;&gt;provision.yaml&lt;/code&gt; for that module).&lt;/p&gt;

&lt;p&gt;These results are recorded to the &lt;a href=&quot;https://puppetlabs.github.io/community_management/&quot;&gt;Community Dashboard&lt;/a&gt; in the &lt;code class=&quot;highlighter-rouge&quot;&gt;Github Actions Report&lt;/code&gt; tab, which shows the test results for the last five runs for each workflow and module.
Right now, these results are recorded fairly simply, listing the run number, the branch the tests ran against, and whether they passed or failed.
In the future, we will be improving the usefulness of this dashboard in numerous ways, but for now we just wanted a way to get some quick visualization for triage.&lt;/p&gt;

&lt;h2 id=&quot;updated-tools-pages&quot;&gt;Updated Tools Page(s)&lt;/h2&gt;

&lt;p&gt;This week we also updated the page on this site for the tools we maintain - each project header now also leads to a page for that tool with additional information.
We’ve collected some at-a-glance badges for each of the projects too.
We hope this will make keeping up with the available tooling a little easier!&lt;/p&gt;

&lt;h2 id=&quot;puppet-modulebuilder-gem-010-release&quot;&gt;puppet-modulebuilder Gem 0.1.0 Release&lt;/h2&gt;

&lt;p&gt;As we mentioned last week, we’ve &lt;a href=&quot;https://tickets.puppetlabs.com/browse/IAC-532&quot;&gt;been working&lt;/a&gt; with the PDE and Night Watch teams at Puppet on the &lt;a href=&quot;https://github.com/puppetlabs/puppet-modulebuilder&quot;&gt;puppet-modulebuilder&lt;/a&gt; gem, which has now &lt;a href=&quot;https://rubygems.org/gems/puppet-modulebuilder/versions/0.1.0&quot;&gt;been released&lt;/a&gt;!
This will carry the actual functionality for &lt;code class=&quot;highlighter-rouge&quot;&gt;pdk build&lt;/code&gt; and allow third-party tools to re-use the same functionality without having to pull in the whole PDK.
A new Litmus release is ongoing to take advantage of this new development!&lt;/p&gt;

&lt;p&gt;Thanks a lot to &lt;a href=&quot;https://github.com/glennsarti&quot;&gt;Glenn Sarti&lt;/a&gt; and &lt;a href=&quot;https://github.com/florindragos&quot;&gt;Florin Dragos&lt;/a&gt; for helping out with everything!&lt;/p&gt;

&lt;h2 id=&quot;facter-4-incoming&quot;&gt;Facter 4 Incoming&lt;/h2&gt;

&lt;p&gt;We started doing some prep work this week as &lt;a href=&quot;https://github.com/puppetlabs/facter-ng&quot;&gt;Facter&lt;/a&gt;’s next major update has &lt;a href=&quot;https://rubygems.org/gems/facter/versions/4.0.8.pre&quot;&gt;become available as prerelease&lt;/a&gt;.
Facter 4 is a return to Ruby from C++ which allows deeper integration with the rest of our modules and test-tooling, and easier hacking on the core facts.
First we’ve got some checking and verifying to do as this major version rolls out to ensure a smooth experience for everyone.
If you want to try it out in your module’s unit tests, specify &lt;code class=&quot;highlighter-rouge&quot;&gt;FACTER_GEM_VERSION='4.0.8.pre'&lt;/code&gt; in your environment before any bundle or PDK commands.
Let us know in the &lt;a href=&quot;https://puppetcommunity.slack.com/archives/C0W1X7ZAL&quot;&gt;#puppet-dev&lt;/a&gt; channel on the &lt;a href=&quot;http://slack.puppet.com/&quot;&gt;community slack&lt;/a&gt; how it goes.&lt;/p&gt;

&lt;p&gt;We should have more on this in the near future, particularly any advice and guidance around what it will mean for you as module developers and consumers - the expected release date is March 11th, 2020!&lt;/p&gt;

&lt;h2 id=&quot;pdk-1170-release&quot;&gt;PDK 1.17.0 Release&lt;/h2&gt;

&lt;p&gt;A &lt;a href=&quot;https://github.com/puppetlabs/pdk/blob/master/CHANGELOG.md#v1170-2020-02-27&quot;&gt;new release of the PDK&lt;/a&gt; is here with initial support for control repos, system-level settings, and &lt;a href=&quot;https://github.com/puppetlabs/pdk-templates/compare/1.16.0...1.17.0&quot;&gt;numerous template updates&lt;/a&gt;!&lt;/p&gt;

&lt;h2 id=&quot;new-puppet-blog-on-de-forking-a-module&quot;&gt;New Puppet Blog on De-Forking a Module&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/genebean&quot;&gt;Gene Liverman&lt;/a&gt;, a senior SRE at Puppet, &lt;a href=&quot;https://puppet.com/blog/de-forking-a-puppet-module/&quot;&gt;wrote a blog post on the main Puppet blog this week for de-forking a Puppet module&lt;/a&gt; - essentially, what to do when you want to incorporate upstream changes back into a project you’ve forked.
Great work on a topic that comes up fairly often in the open source world!&lt;/p&gt;

&lt;h2 id=&quot;puppetcamp-berlin-2020&quot;&gt;PuppetCamp Berlin 2020&lt;/h2&gt;

&lt;p&gt;In two weeks the sold out &lt;a href=&quot;https://www.eventbrite.com/e/puppet-camp-berlin-tickets-84908295999&quot;&gt;PuppetCamp Berlin&lt;/a&gt; will happen at the AWS OpsWorks offices, with a great showing of folks from the community and Puppet.
If you’re one of the lucky ones with a ticket, come and say hi to Melissa Casburn, our UX architect, &lt;a href=&quot;https://github.com/binford2k&quot;&gt;@binford2k&lt;/a&gt;, community shepherd, and &lt;a href=&quot;https://github.com/DavidS&quot;&gt;@DavidS&lt;/a&gt;, tech lead of IAC.&lt;/p&gt;</content><author><name>michaeltlombardi</name></author><category term="module updates" /><category term="community" /><category term="litmus" /><category term="facter" /><category term="testing" /><category term="pdk" /><summary type="html">The IAC team has been working on a lot of interesting things over the past week. Here’s a brief overview of what we’ve been up to:</summary></entry><entry><title type="html">21st Feb 2020: IAC Team Status Update</title><link href="https://puppetlabs.github.io/iac/team/status/2020/02/21/status-update.html" rel="alternate" type="text/html" title="21st Feb 2020: IAC Team Status Update" /><published>2020-02-21T00:00:00+00:00</published><updated>2020-02-21T00:00:00+00:00</updated><id>https://puppetlabs.github.io/iac/team/status/2020/02/21/status-update</id><content type="html" xml:base="https://puppetlabs.github.io/iac/team/status/2020/02/21/status-update.html">&lt;p&gt;The IAC team has been working on a lot of interesting things over the past week.
Here’s a brief overview of what we’ve been up to:&lt;/p&gt;

&lt;h2 id=&quot;updates-to-puppet-modules&quot;&gt;Updates to Puppet Modules&lt;/h2&gt;

&lt;p&gt;We’ve released only one module since last week:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://forge.puppet.com/puppetlabs/java&quot;&gt;puppetlabs/java&lt;/a&gt; (v6.2.0)&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;community-contributions&quot;&gt;Community Contributions&lt;/h2&gt;

&lt;p&gt;Thanks to &lt;a href=&quot;https://github.com/baurmatt&quot;&gt;@baurmatt&lt;/a&gt; for his change to the concat module,
&lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-concat/pull/627&quot;&gt;adding support for Deferred function in concat fragment&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;approved-modules&quot;&gt;Approved Modules&lt;/h2&gt;

&lt;p&gt;This week we happily approved two new modules:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://forge.puppet.com/fervid/secure_linux_cis&quot;&gt;fervid/secure_linux_cis&lt;/a&gt; is a CIS hardening module for Linux servers by &lt;a href=&quot;https://www.fervid.us/&quot;&gt;fervid.us&lt;/a&gt;.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://forge.puppet.com/stackstorm/st2&quot;&gt;stackstorm/st2&lt;/a&gt; installs, configures and manages the eponymous &lt;a href=&quot;https://stackstorm.com&quot;&gt;StackStorm&lt;/a&gt; platform for event-driven runbook automation.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a href=&quot;https://forge.puppet.com/approved&quot;&gt;Puppet Approved&lt;/a&gt; modules are recommended by us for use with Puppet Open Source and Puppet Enterprise and meet our expectations for quality and usability.&lt;/p&gt;

&lt;h2 id=&quot;new-puppet-modulebuilder-gem&quot;&gt;New puppet-modulebuilder Gem&lt;/h2&gt;

&lt;p&gt;Work &lt;a href=&quot;https://tickets.puppetlabs.com/browse/IAC-532&quot;&gt;has started&lt;/a&gt; on creating a &lt;a href=&quot;https://github.com/puppetlabs/puppet-modulebuilder&quot;&gt;puppet-modulebuilder&lt;/a&gt; gem.
This will carry the actual functionality for &lt;code class=&quot;highlighter-rouge&quot;&gt;pdk build&lt;/code&gt; and allow third-party tools to re-use the same functionality without having to pull in the whole PDK.
We expect a first release early next week.
Follow &lt;a href=&quot;https://tickets.puppetlabs.com/browse/IAC-552&quot;&gt;IAC-552&lt;/a&gt; to get a notification when that happens.&lt;/p&gt;

&lt;p&gt;Thanks a lot to &lt;a href=&quot;https://github.com/glennsarti&quot;&gt;Glenn&lt;/a&gt; for helping out with the actual porting of the code.&lt;/p&gt;

&lt;h2 id=&quot;ongoing-litmus-conversions&quot;&gt;Ongoing Litmus Conversions&lt;/h2&gt;

&lt;p&gt;This week saw a flurry of PRs (through &lt;a href=&quot;https://github.com/puppetlabs/pdksync&quot;&gt;pdksync&lt;/a&gt;) to &lt;a href=&quot;https://tickets.puppetlabs.com/browse/IAC-215&quot;&gt;update all our modules&lt;/a&gt; to use the new &lt;code class=&quot;highlighter-rouge&quot;&gt;use_litmus&lt;/code&gt; support in &lt;a href=&quot;https://github.com/puppetlabs/pdk-templates&quot;&gt;pdk-templates&lt;/a&gt;.
This reduces the amount of configuration we need to carry in each module and validates the pdk-templates feature.&lt;/p&gt;

&lt;p&gt;As expected, the last remaining modules to convert to &lt;a href=&quot;https://github.com/puppetlabs/puppet_litmus&quot;&gt;Litmus&lt;/a&gt; were the ones we didn’t want to touch earlier for good reasons.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-powershell/pull/283&quot;&gt;powershell&lt;/a&gt; has been merged and is now running acceptance tests on Windows (appveyor), Linux and OS X (travis) in public.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-sqlserver/pull/345&quot;&gt;sqlserver&lt;/a&gt; is still resisting,
not the least because we found several areas where the previous test suite was ignoring warnings that we now want to address.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-vsphere/pull/172&quot;&gt;vsphere&lt;/a&gt; is progressing.
We don’t expect to enable PR-level testing on this one,
since it does require access to our internal VCenter.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If you’re interested in porting a module to Litmus,
feel free to reach out to us during &lt;a href=&quot;https://puppet.com/community/office-hours/&quot;&gt;Office Hours&lt;/a&gt; - we’ll be glad to help!&lt;/p&gt;

&lt;p&gt;We’re also looking into updating litmus to make use of &lt;a href=&quot;https://github.com/puppetlabs/bolt/blob/master/CHANGELOG.md#bolt-200&quot;&gt;Bolt v2&lt;/a&gt;.
See &lt;a href=&quot;https://github.com/puppetlabs/puppet_litmus/pull/254&quot;&gt;puppetlabs/puppet_litmus#254&lt;/a&gt; if you want to follow along.&lt;/p&gt;

&lt;p&gt;This week also saw a number of ruby &lt;a href=&quot;https://travis-ci.org/puppetlabs/puppetlabs-mysql/jobs/653408974&quot;&gt;segfaults&lt;/a&gt; and &lt;a href=&quot;https://travis-ci.org/puppetlabs/puppetlabs-mysql/jobs/652904009&quot;&gt;deadlocks&lt;/a&gt; during acceptance testing:&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;448.03s$ bundle exec rake litmus:acceptance:parallel
Running against 3 targets.
./home/travis/build/puppetlabs/puppetlabs-mysql/vendor/bundle/ruby/2.5.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/atomic/ruby_thread_local_var.rb:113: [BUG] Segmentation fault at 0x000000000b4d76d5
ruby 2.5.3p105 (2018-10-18 revision 65156) [x86_64-linux]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ bundle exec rake litmus:acceptance:parallel
Running against 2 targets.
.
No output has been received in the last 10m0s, this potentially indicates a stalled build or something wrong with the build itself.
Check the details on how to adjust your build configuration on: https://docs.travis-ci.com/user/common-build-problems/#build-times-out-because-no-output-was-received
The build has been terminated
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We’re still working on figuring out what changed recently to trigger these.&lt;/p&gt;

&lt;h2 id=&quot;refactoring-stdlib-to-puppet4-function-api&quot;&gt;Refactoring stdlib to Puppet4 function API&lt;/h2&gt;

&lt;p&gt;Off the back of Ben’s &lt;a href=&quot;https://binford2k.com/2019/11/27/automagic-function-port/&quot;&gt;blog on the Puppet4 function API&lt;/a&gt;,
work has started to move all functions in the &lt;a href=&quot;https://forge.puppet.com/puppetlabs/stdlib&quot;&gt;stdlib module&lt;/a&gt; to the “new” API.
To quote Ben:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Each modern Puppet 4.x function is just a little faster and just a little safer
to use, meaning that as we all port our functions over, compilation times across
the ecosystem will get more and more performant. Modern Puppet 4.x functions
have improved thread safety, memory management, and load time. Even more
importantly, they’re isolated to the environment they’re loaded from.&lt;/p&gt;

  &lt;p&gt;And as a developer, you’ll see benefits like namespaced function signatures,
automatic data type checking, multiple dispatches allowing you to easily handle
different kinds of function invocations, and vastly improved code reuse.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;If you want to follow along or provide feedback,
please avail yourself of &lt;a href=&quot;https://tickets.puppetlabs.com/browse/IAC-114&quot;&gt;IAC-114&lt;/a&gt;.&lt;/p&gt;</content><author><name>dev_el_ops</name></author><category term="module updates" /><category term="community" /><category term="approved" /><category term="litmus" /><category term="powershell" /><category term="sqlserver" /><category term="vsphere" /><category term="modulebuilder" /><category term="stdlib" /><summary type="html">The IAC team has been working on a lot of interesting things over the past week. Here’s a brief overview of what we’ve been up to:</summary></entry><entry><title type="html">Setting up basic infrastructure for your gem</title><link href="https://puppetlabs.github.io/iac/gem/development/2020/02/19/infrastructure-for-the-gem.html" rel="alternate" type="text/html" title="Setting up basic infrastructure for your gem" /><published>2020-02-19T00:00:00+00:00</published><updated>2020-02-19T00:00:00+00:00</updated><id>https://puppetlabs.github.io/iac/gem/development/2020/02/19/infrastructure-for-the-gem</id><content type="html" xml:base="https://puppetlabs.github.io/iac/gem/development/2020/02/19/infrastructure-for-the-gem.html">&lt;h2 id=&quot;introduction&quot;&gt;Introduction&lt;/h2&gt;

&lt;p&gt;Here we will be going through the steps and best practices for setting up basic infrastructure for your gem.
The steps given can be followed by anyone to setup the basic infrastructure for gem development which does the following.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;creates the basic file structure for the gem.&lt;/li&gt;
  &lt;li&gt;adds the rubocop which validates the guidelines outlined in the community Ruby Style Guide.&lt;/li&gt;
  &lt;li&gt;adds the travis or appveyor testing to the repo which validates the changes to the repo.&lt;/li&gt;
  &lt;li&gt;adds the dependendabot to the repo which creates pull requests to keep dependencies up to date.&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;h4 id=&quot;note&quot;&gt;Note:&lt;/h4&gt;

  &lt;p&gt;This walkthrough assumes you have the following software installed:&lt;/p&gt;

  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;https://www.ruby-lang.org/en/downloads/&quot;&gt;Ruby&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;

  &lt;p&gt;It also assumes familiarity with the &lt;a href=&quot;https://rubygems.org/&quot;&gt;Ruby gems&lt;/a&gt;.&lt;/p&gt;

&lt;/blockquote&gt;

&lt;h2 id=&quot;infrastructure-for-your-gem&quot;&gt;Infrastructure for your gem&lt;/h2&gt;

&lt;p&gt;We’re going through the steps and best practices for setting up basic infrastructure for your gem.&lt;/p&gt;

&lt;p&gt;For any repo created for developing a Gem we add owner, access and license to the repo.
Follow the steps below to add them.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Open a &lt;a href=&quot;https://github.com&quot;&gt;git hub&lt;/a&gt; page, perform the rest of these actions from there.
    &lt;ol&gt;
      &lt;li&gt;
        &lt;p&gt;Click on + to create a new repo.
&lt;img src=&quot;/iac/assets/2020-02-19-infrastructure-for-the-gem/newrepo.png&quot; alt=&quot;+&quot; /&gt;&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;Provider the owner information, repo name and license.
&lt;img src=&quot;/iac/assets/2020-02-19-infrastructure-for-the-gem/owner.png&quot; alt=&quot;owner information and repo name&quot; /&gt;
&lt;img src=&quot;/iac/assets/2020-02-19-infrastructure-for-the-gem/license.png&quot; alt=&quot;license&quot; /&gt;&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;Click on Create repository button.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;Open the new repo created and navigate to settings tab to update the access.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;Provide your team as admin on github. (This example shows Puppet’s modules team)
&lt;img src=&quot;/iac/assets/2020-02-19-infrastructure-for-the-gem/githubowner.png&quot; alt=&quot;admin&quot; /&gt;&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Follow the steps below for creating the gem structure, add the rubocop validation, add the travis or appveyor testing to the repo.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Open the command line and perform the rest of these actions from there.
    &lt;ol&gt;
      &lt;li&gt;Clone the new repo created. Add the upstream project and checkout the branch.
        &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone https://github.com/sheenaajay/puppet-modulebuilder.git
git remote add puppetlabs https://github.com/puppetlabs/puppet-modulebuilder.git
git checkout &lt;span class=&quot;nt&quot;&gt;-b&lt;/span&gt; blogpost
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;Create a ruby gem with bundler and perform the commit.
        &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bundle gem puppet-modulebuilder
git add &lt;span class=&quot;nt&quot;&gt;-A&lt;/span&gt;
git commit &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Initial commit of puppet-modulebuilder gem scaffolding&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
        &lt;p&gt;See &lt;a href=&quot;https://yehudakatz.com/2010/12/16/clarifying-the-roles-of-the-gemspec-and-gemfile/&quot;&gt;Clarifying the Roles of the .gemspec and Gemfile&lt;/a&gt; on whether you want to commit the &lt;code class=&quot;highlighter-rouge&quot;&gt;Gemfile.lock&lt;/code&gt; or not.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;Remove unused default gem development scripts if any and perform the commit.
        &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; bin/console
&lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; bin/setup
git add &lt;span class=&quot;nt&quot;&gt;-A&lt;/span&gt;
git commit &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Remove unused default gem development scripts&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;Update gemspec with actual values for spec.authors, spec.email, spec.summary, spec.description, spec.homepage, spec.metadata.
&lt;img src=&quot;/iac/assets/2020-02-19-infrastructure-for-the-gem/gemspec.png&quot; alt=&quot;gemspec&quot; /&gt;
        &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git add &lt;span class=&quot;nt&quot;&gt;-A&lt;/span&gt;
git commit &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Update gemspec with actual values&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;Copy puppet-style rubocop rules(Example from &lt;a href=&quot;https://github.com/puppetlabs/pdk/blob/master/.rubocop.yml&quot;&gt;pdk repo&lt;/a&gt;), activate and apply default fixes.
        &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bundle &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--path&lt;/span&gt; .bundle/gems/
bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;rubocop
git add &lt;span class=&quot;nt&quot;&gt;-A&lt;/span&gt;
git commit &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Include, activate rubocop, apply default fixes&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;Add instruction files for travis-ci and appveyor. Sample &lt;a href=&quot;https://github.com/puppetlabs/puppet-modulebuilder/pull/1&quot;&gt;PR&lt;/a&gt; contains travis.yml and appveyor.yml.
        &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git add &lt;span class=&quot;nt&quot;&gt;-A&lt;/span&gt;
git commit &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Add instruction files for travis-ci and appveyor&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;Add modules team to CODEOWNERS.
  Create the CODEOWNERS file in .github/CODEOWNERS
        &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git add &lt;span class=&quot;nt&quot;&gt;-A&lt;/span&gt;
git commit &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Add modules team to CODEOWNERS&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Finally push your changes to the branch and create the PR “Basic infrastructure”
Sample &lt;a href=&quot;https://github.com/puppetlabs/puppet-modulebuilder/pull/1&quot;&gt;PR&lt;/a&gt; for reference&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Follow the steps below for enabling CI jobs and dependabot for the repo.
    &lt;ol&gt;
      &lt;li&gt;Set up travs-ci.org for simple rubocop and spec testing. Open a &lt;a href=&quot;https://travis-ci.org/account/repositories&quot;&gt;travis-ci-org&lt;/a&gt; page. Click on      Sync account.
&lt;img src=&quot;/iac/assets/2020-02-19-infrastructure-for-the-gem/syncaccount.png&quot; alt=&quot;Sync account&quot; /&gt;&lt;/li&gt;
      &lt;li&gt;Set up appveyor for simple rubocop and spec testing. Open a &lt;a href=&quot;https://ci.appveyor.com/account/puppetlabs/projects/new&quot;&gt;ci-appveyor&lt;/a&gt; page.        Click on Add.
&lt;img src=&quot;/iac/assets/2020-02-19-infrastructure-for-the-gem/add.png&quot; alt=&quot;Add&quot; /&gt;&lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;Allow dependabot access the new repo created. Open a &lt;a href=&quot;https://app.dependabot.com/accounts/puppetlabs/&quot;&gt;dependabot&lt;/a&gt; page.
Click on + , select the repo and provide access.
&lt;img src=&quot;/iac/assets/2020-02-19-infrastructure-for-the-gem/dependabotadd.png&quot; alt=&quot;+&quot; /&gt;&lt;/p&gt;

        &lt;p&gt;&lt;img src=&quot;/iac/assets/2020-02-19-infrastructure-for-the-gem/dependabot.png&quot; alt=&quot;repo created&quot; /&gt;&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;Enable dependabot for the repo.
&lt;img src=&quot;/iac/assets/2020-02-19-infrastructure-for-the-gem/dependabotenable.png&quot; alt=&quot;+&quot; /&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;wrapping-up&quot;&gt;Wrapping Up&lt;/h2&gt;

&lt;p&gt;Hooray! We’ve created the infrastructure for our gem !&lt;/p&gt;</content><author><name>sheenaajay</name></author><category term="walkthrough" /><category term="modules" /><category term="testing" /><summary type="html">Introduction</summary></entry><entry><title type="html">14th Feb 2020: IAC Team Status Update</title><link href="https://puppetlabs.github.io/iac/team/status/2020/02/14/status-update.html" rel="alternate" type="text/html" title="14th Feb 2020: IAC Team Status Update" /><published>2020-02-14T00:00:00+00:00</published><updated>2020-02-14T00:00:00+00:00</updated><id>https://puppetlabs.github.io/iac/team/status/2020/02/14/status-update</id><content type="html" xml:base="https://puppetlabs.github.io/iac/team/status/2020/02/14/status-update.html">&lt;p&gt;The IAC team has been working on a lot of interesting things over the past week. Here’s a brief overview of what we’ve been up to:&lt;/p&gt;

&lt;h2 id=&quot;updates-to-puppet-modules&quot;&gt;Updates to Puppet Modules&lt;/h2&gt;
&lt;p&gt;We’ve released an update to two modules since last week:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://forge.puppet.com/puppetlabs/pwshlib&quot;&gt;puppetlabs/pwshlib&lt;/a&gt; (v0.4.1)&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://forge.puppet.com/puppetlabs/scheduled_task&quot;&gt;puppetlabs/scheduled_task&lt;/a&gt; (v2.0.1)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;This update to &lt;a href=&quot;https://forge.puppet.com/puppetlabs/scheduled_task&quot;&gt;puppetlabs/scheduled_task&lt;/a&gt; resolves an issue reported in &lt;a href=&quot;https://tickets.puppetlabs.com/browse/MODULES-10101&quot;&gt;MODULES-10101&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;A fix went in to &lt;a href=&quot;https://forge.puppet.com/puppetlabs/pwshlib&quot;&gt;puppetlabs/pwshlib&lt;/a&gt; to resolve a bug that was causing runtime errors on older versions of Ruby. See &lt;a href=&quot;https://github.com/puppetlabs/ruby-pwsh/pull/30&quot;&gt;here&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;We’ll have more module releases next week, but a few interesting updates to come:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://forge.puppet.com/puppetlabs/java&quot;&gt;puppetlabs-java&lt;/a&gt;:&lt;/strong&gt; Thanks to &lt;a href=&quot;https://github.com/timdeluxe&quot;&gt;timdeluxe&lt;/a&gt; for &lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-java/pull/370&quot;&gt;the PR&lt;/a&gt; to add support for &lt;a href=&quot;https://adoptopenjdk.net/&quot;&gt;AdoptOpen JDK&lt;/a&gt; to the module. &lt;a href=&quot;https://github.com/fraenki&quot;&gt;fraenki&lt;/a&gt; was also a great help in getting this PR over the line. We’ll releasing an update to the module soon!&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://forge.puppet.com/puppetlabs/mysql&quot;&gt;puppetlabs-mysql&lt;/a&gt;:&lt;/strong&gt; &lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-mysql/pull/1192&quot;&gt;This is a nice PR&lt;/a&gt; from &lt;a href=&quot;https://github.com/mauricemeyer&quot;&gt;mauricemeyer&lt;/a&gt; that now allows a user to override the default configuration for mysql, if you wish. Thanks to &lt;a href=&quot;https://github.com/bastelfreak&quot;&gt;bastelfreak&lt;/a&gt; for the help during the review stages.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://forge.puppet.com/puppetlabs/apt&quot;&gt;puppetlabs-apt&lt;/a&gt;:&lt;/strong&gt; &lt;a href=&quot;https://github.com/anarcat&quot;&gt;anarcat&lt;/a&gt; submitted &lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-apt/pull/904&quot;&gt;this fix&lt;/a&gt; which also highlighted an issue with our tests. Two for the price of one! Thanks to &lt;a href=&quot;https://github.com/bastelfreak&quot;&gt;bastelfreak&lt;/a&gt; and &lt;a href=&quot;https://github.com/baldurmen&quot;&gt;baldurmen&lt;/a&gt; for the reviews, too.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;were-still-buzzing-about-honeycomb&quot;&gt;We’re still buzzing about Honeycomb&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;/iac/assets/2020-02-14-status-update/honeycomb_rspec_formatter.png&quot; alt=&quot;Module RSpec trace&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We’re continuing to see the benefits of &lt;a href=&quot;https://www.honeycomb.io/&quot;&gt;Honeycomb&lt;/a&gt;. To make life easier, we now have the &lt;a href=&quot;https://github.com/puppetlabs/rspec_honeycomb_formatter&quot;&gt;rspec_honeycomb_formatter&lt;/a&gt;.
When you add this gem to a project’s Gemfile, it will create a &lt;a href=&quot;https://relishapp.com/rspec/rspec-core/docs/formatters/custom-formatters&quot;&gt;Custom formatter in RSpec&lt;/a&gt; that will capture the metrics we’re interested in, then send it to the configured Honeycomb endpoint for processing!&lt;/p&gt;

&lt;h2 id=&quot;supported-modules-litmus-conversion&quot;&gt;Supported Modules Litmus Conversion&lt;/h2&gt;
&lt;p&gt;We’re starting to get to the bottom of the list of modules still to be converted to &lt;a href=&quot;https://github.com/puppetlabs/puppet_litmus&quot;&gt;Litmus&lt;/a&gt;. We’re wrapping up on &lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-powershell/&quot;&gt;puppetlabs-powershell&lt;/a&gt;, &lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-sqlserver/&quot;&gt;puppetlabs-sqlserver&lt;/a&gt; and &lt;a href=&quot;https://github.com/puppetlabs/puppetlabs-vsphere/&quot;&gt;puppetlabs-vsphere&lt;/a&gt;.
Converting to Litmus makes testing of the modules for both ourselves at Puppet and contributors from the Community, a much easier experience.
If you’re interested in porting a module to Litmus, feel free to reach out to us during &lt;a href=&quot;https://puppet.com/community/office-hours/&quot;&gt;Office Hours&lt;/a&gt; - we’ll be glad to help!&lt;/p&gt;</content><author><name>criskoduck</name></author><category term="module updates" /><category term="tooling" /><category term="personal" /><category term="honeycomb" /><category term="metrics" /><category term="litmus" /><category term="windows" /><category term="powershell" /><summary type="html">The IAC team has been working on a lot of interesting things over the past week. Here’s a brief overview of what we’ve been up to:</summary></entry><entry><title type="html">Gem Testing with pdksync</title><link href="https://puppetlabs.github.io/iac/pdksync/testing/2020/02/12/gem-testing-with-pdksync.html" rel="alternate" type="text/html" title="Gem Testing with pdksync" /><published>2020-02-12T00:00:00+00:00</published><updated>2020-02-12T00:00:00+00:00</updated><id>https://puppetlabs.github.io/iac/pdksync/testing/2020/02/12/gem-testing-with-pdksync</id><content type="html" xml:base="https://puppetlabs.github.io/iac/pdksync/testing/2020/02/12/gem-testing-with-pdksync.html">&lt;h2 id=&quot;introduction&quot;&gt;Introduction&lt;/h2&gt;

&lt;p&gt;pdksync enables you to do a lot more than just pdk update against a set of defined modules. In this blog post we will be going through single or multi gem testing features of pdksync.&lt;/p&gt;

&lt;h2 id=&quot;setup&quot;&gt;Setup&lt;/h2&gt;

&lt;p&gt;Download a fork of the repo, which can be found here &lt;a href=&quot;https://github.com/puppetlabs/pdksync&quot;&gt;pdksync&lt;/a&gt;. Or you can install via Rubygems, it can be found here &lt;a href=&quot;https://rubygems.org/gems/pdksync&quot;&gt;pdksync&lt;/a&gt;.
Install gems by using &lt;code class=&quot;highlighter-rouge&quot;&gt;bundle install&lt;/code&gt;.
Ensure you have a GITHUB_TOKEN set in your env, if you don’t add it by running &lt;code class=&quot;highlighter-rouge&quot;&gt;export GITHUB_TOKEN=&amp;lt;your github token&amp;gt;&lt;/code&gt;, this is required for authentication.
Important - Manually edit the list contained in ‘managed_modules.yml’ to ensure it is correct with the modules you wish to update. Please note this is critical as this tool will create PRs against the repos included in this list - you don’t want to run this against a module you aren’t familiar with. Do not proceed to the next step without doing this.
Run the rake task by using &lt;code class=&quot;highlighter-rouge&quot;&gt;bundle exec rake pdksync&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;part-one-functionality-single-gem-testing&quot;&gt;Part One: Functionality Single Gem Testing&lt;/h2&gt;

&lt;p&gt;pdksync tool comes with the feature to update the Gemfile. Puppet provides a lot of useful gems to access and manage their functionality between modules. This functionality will help user to perform gem testing prior to release. User is given new rake tasks to update SHA/Version/Branch/line in the Gemfile. Then the changes can be committed, PR can be created which will run the acceptance tests in the PR. If all the tests are executing successfully then the user can close the PRS and release the gem.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;h4 id=&quot;note&quot;&gt;Note:&lt;/h4&gt;

  &lt;p&gt;It assumes very limited familiarity with the &lt;a href=&quot;https://github.com/puppetlabs/pdksync&quot;&gt;pdksync&lt;/a&gt; and &lt;a href=&quot;https://puppet.com/blog/keep-your-puppet-modules-up-to-date-pdk/&quot;&gt;pdk&lt;/a&gt;&lt;/p&gt;

&lt;/blockquote&gt;

&lt;p&gt;Run gem_file_update against modules&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pdksync:gem_file_update[:gem_to_test, :gem_line, :gem_sha_finder, :gem_sha_replacer, :gem_version_finder, :gem_version_replacer, :gem_branch_finder, :gem_branch_replacer]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;eg rake to update gem line&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pdksync:gem_file_update[&lt;span class=&quot;s1&quot;&gt;'puppet_litmus'&lt;/span&gt;, &lt;span class=&quot;s2&quot;&gt;&quot;gem 'puppet_litmus'&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; git: 'https://github.com/test/puppet_litmus.git'&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; branch: 'testbranch'&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;eg rake to update sha&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pdksync:gem_file_update[&lt;span class=&quot;s1&quot;&gt;'puppet_litmus'&lt;/span&gt;, &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;, &lt;span class=&quot;s1&quot;&gt;'20ee04ba1234e9e83eb2ffb5056e23d641c7a018'&lt;/span&gt;, &lt;span class=&quot;s1&quot;&gt;'20ee04ba1234e9e83eb2ffb5056e23d641c7a31'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;eg rake to update version&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pdksync:gem_file_update[&lt;span class=&quot;s1&quot;&gt;'puppet_litmus'&lt;/span&gt;, &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;, &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;, &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;, &lt;span class=&quot;s2&quot;&gt;&quot;= 0.9.0&quot;&lt;/span&gt;, &lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;= 0.10.0&quot;&lt;/span&gt;, &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;, &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;eg rake to update branch&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pdksync:gem_file_update[&lt;span class=&quot;s1&quot;&gt;'puppet_litmus'&lt;/span&gt;, &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;, &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;, &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;, &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;, &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;, &lt;span class=&quot;s1&quot;&gt;'testbranch'&lt;/span&gt;, &lt;span class=&quot;s1&quot;&gt;'testbranches'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Below given are the workflows for doing single gem testing with pdksync.&lt;/p&gt;

&lt;p&gt;In Workflow 1 we can clone modules, update the gem file, create the commit, push the changes and create the PR using separate rake tasks.&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bundle &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--path&lt;/span&gt; .bundle/gems/
bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;rake git:clone_managed_modules
bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;rake &lt;span class=&quot;s1&quot;&gt;'pdksync:gem_file_update[]'&lt;/span&gt;
bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;rake &lt;span class=&quot;s1&quot;&gt;'git:create_commit[]'&lt;/span&gt;
bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;rake &lt;span class=&quot;s1&quot;&gt;'git:push'&lt;/span&gt;
bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;rake &lt;span class=&quot;s1&quot;&gt;'git:create_pr[]'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In Workflow 2 we can clone modules, update the gem file, create the commit, push the changes and create the PR using single rake task&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Using single rake job
bundle install --path .bundle/gems/
bundle exec rake 'gem_testing[]'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Once the verified gem is released we can use pdksync to update the the new version of gem released in the &lt;code class=&quot;highlighter-rouge&quot;&gt;.sync.yaml&lt;/code&gt; file.&lt;/p&gt;

&lt;h2 id=&quot;part-two-functionality-multi-gem-testing&quot;&gt;Part Two: Functionality Multi Gem Testing&lt;/h2&gt;

&lt;p&gt;pdksync tool is extended with the feature to perform multi gem testing (&lt;code class=&quot;highlighter-rouge&quot;&gt;puppet-module-gems&lt;/code&gt;). This functionality will identify the current version and bump the version by one. Then it will build and push the gems to gemfury account. Export the GEMFURY_TOKEN to use this rake task.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;GEMFURY_TOKEN&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;access_token&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Run the following commands to check that everything is working as expected:&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bundle &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--path&lt;/span&gt; .bundle/gems/
bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;rake &lt;span class=&quot;nt&quot;&gt;-T&lt;/span&gt;
bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;rake &lt;span class=&quot;s1&quot;&gt;'git:clone_gem[puppet-module-gems]'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Run multigem_file_update against modules:&lt;/p&gt;

&lt;p&gt;Clone gem&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git:clone_gem[&lt;span class=&quot;s1&quot;&gt;'puppet-module-gems'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Build and Push new gems built to the gemfury account for testing&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pdksync:multi_gem_testing[&lt;span class=&quot;s1&quot;&gt;'puppet-module-gems'&lt;/span&gt;,&lt;span class=&quot;s1&quot;&gt;'config/info.yml'&lt;/span&gt;,&lt;span class=&quot;s1&quot;&gt;'exe/build-gems.rb'&lt;/span&gt;,&lt;span class=&quot;s1&quot;&gt;'pkg'&lt;/span&gt;,&lt;span class=&quot;s1&quot;&gt;'gem_tester'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Update Gemfile of the modules with the new gem should be pushed to Gemfury.&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pdksync:multigem_file_update[&lt;span class=&quot;s1&quot;&gt;'puppet-module'&lt;/span&gt;,&lt;span class=&quot;s1&quot;&gt;'tester'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Below given is the workflows for doing multi gem testing with pdksync.&lt;/p&gt;

&lt;p&gt;In this workflow we can clone gems, update the version, build the gem, push the changes to gemfury and update the gem file of the required modules with the latest gem updated in the fury. Then we can create PR or run tests locally or run tests through jenkins to verify the module test results.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bundle &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--path&lt;/span&gt; .bundle/gems/
bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;rake &lt;span class=&quot;s1&quot;&gt;'git:clone_gem[puppet-module-gems]'&lt;/span&gt;
bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;rake &lt;span class=&quot;s1&quot;&gt;'pdksync:multi_gem_testing[]'&lt;/span&gt;
bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;rake &lt;span class=&quot;s1&quot;&gt;'pdksync:multigem_file_update[]'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;wrapping-up&quot;&gt;Wrapping Up&lt;/h2&gt;

&lt;p&gt;These are the steps that we can follow to perform single or multi gem testing using pdksync.&lt;/p&gt;</content><author><name>sheenaajay</name></author><category term="walkthrough" /><category term="modules" /><category term="gems" /><summary type="html">Introduction</summary></entry></feed>